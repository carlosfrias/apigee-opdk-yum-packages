---
# tasks file for apigee-opdk-yum-packages
- name: Update basic yum os packages with proxy
  become: yes
  yum:
    name: "{{ item }}"
    state: present
    exclude: "{{ yum_exclude_packages | join(',') }}"
    disable_gpg_check: yes
    allow_downgrade: yes
  with_items: "{{ yum_os_minimum_packages }}"
  environment:
    http_proxy: "{{ http_proxy }}"
    https_proxy: "{{ https_proxy }}"
    no_proxy: "{{ no_proxy }}"
  when: yum_os_minimum_packages is defined and yum_exclude_packages is defined

- name: Update basic yum os packages with proxy
  become: yes
  yum:
    name: "{{ item }}"
    state: present
    disable_gpg_check: yes
    allow_downgrade: yes
  with_items: "{{ yum_os_minimum_packages }}"
  environment:
    http_proxy: "{{ http_proxy }}"
    https_proxy: "{{ https_proxy }}"
    no_proxy: "{{ no_proxy }}"
  when: yum_os_minimum_packages is defined and yum_exclude_packages is not defined
